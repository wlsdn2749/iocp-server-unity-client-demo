# π€ IOCP GameServer μ„±λ¥ μΈ΅μ • κ°€μ΄λ“ (30κ° ν΄λΌμ΄μ–ΈνΈ)

## π“ μΈ΅μ •ν•  ν•µμ‹¬ μ§€ν‘λ“¤

### 1. **μ„λ²„ μ„±λ¥ μ§€ν‘**
- **TPS (Transactions Per Second)**: μ„λ²„κ°€ μ²λ¦¬ν•λ” νΈλμ­μ… μ
- **ν¨ν‚· μ²λ¦¬ μ‹κ°„**: ν‰κ· /μµλ€ ν¨ν‚· μ²λ¦¬ μ‹κ°„
- **λ©”λ¨λ¦¬ μ‚¬μ©λ‰**: ν™ λ©”λ¨λ¦¬ + ν’€ λ©”λ¨λ¦¬
- **μ—°κ²°λ ν΄λΌμ΄μ–ΈνΈ μ**: μ‹¤μ‹κ°„ μ—°κ²° μƒνƒ
- **ν¨ν‚· μ†΅μμ‹  ν†µκ³„**: μ΄ ν¨ν‚· μ, Move/Chat ν¨ν‚· μ

### 2. **ν΄λΌμ΄μ–ΈνΈ μ„±λ¥ μ§€ν‘**
- **ν΄λΌμ΄μ–ΈνΈ TPS**: κ° ν΄λΌμ΄μ–ΈνΈκ°€ λ³΄λ‚΄λ” ν¨ν‚· μ
- **μ‘λ‹µ μ‹κ°„**: μ„λ²„ μ‘λ‹µ μ§€μ—° μ‹κ°„
- **μ—°κ²° μƒνƒ**: μ—°κ²° μ„±κ³µ/μ‹¤ν¨ ν†µκ³„
- **ν¨ν‚· μ „μ†΅ μ„±κ³µμ¨**: ν¨ν‚· μ†μ‹¤λ¥ 

## π― λ©ν‘ μ„±λ¥ μ§€ν‘

### **ν΄λΌμ΄μ–ΈνΈ μλ³„ μμƒ TPS**
```
ν΄λΌμ΄μ–ΈνΈ μ | Move TPS | Chat TPS | μ΄ TPS | μμƒ λ¶€ν•
------------|----------|----------|--------|----------
5κ°         | 20       | 2.5      | 22.5   | λ‚®μ
10κ°        | 40       | 5.0      | 45.0   | λ³΄ν†µ
15κ°        | 60       | 7.5      | 67.5   | μ¤‘κ°„
20κ°        | 80       | 10.0     | 90.0   | λ†’μ
25κ°        | 100      | 12.5     | 112.5  | λ§¤μ° λ†’μ
30κ°        | 120      | 15.0     | 135.0  | μµλ€
```

**κ³„μ‚° λ°©μ‹:**
- Move ν¨ν‚·: 250ms κ°„κ²© = 4 TPS/ν΄λΌμ΄μ–ΈνΈ
- Chat ν¨ν‚·: 2000ms κ°„κ²© = 0.5 TPS/ν΄λΌμ΄μ–ΈνΈ

### **μΆ‹μ€ μ„±λ¥ κΈ°μ¤€**

#### πΆ **μ°μν• μ„±λ¥**
- **μ‘λ‹µ μ‹κ°„**: < 10ms
- **λ©”λ¨λ¦¬ μ‚¬μ©λ‰**: μ•μ •μ  (λ©”λ¨λ¦¬ λ¦¬ν¬ μ—†μ)
- **CPU μ‚¬μ©λ¥ **: < 70%
- **μ—°κ²° μ„±κ³µλ¥ **: 100%
- **ν¨ν‚· μ†μ‹¤λ¥ **: 0%
- **TPS μ„ ν• μ¦κ°€**: ν΄λΌμ΄μ–ΈνΈ μμ— λΉ„λ΅€

#### π΅ **μ–‘νΈν• μ„±λ¥**
- **μ‘λ‹µ μ‹κ°„**: 10-50ms
- **λ©”λ¨λ¦¬ μ‚¬μ©λ‰**: μ™„λ§ν• μ¦κ°€
- **CPU μ‚¬μ©λ¥ **: 70-85%
- **μ—°κ²° μ„±κ³µλ¥ **: > 95%
- **ν¨ν‚· μ†μ‹¤λ¥ **: < 1%
- **TPS μ¦κ°€μ¨**: 80% μ΄μƒ μ„ ν•

#### π”΄ **μ£Όμ ν•„μ”**
- **μ‘λ‹µ μ‹κ°„**: > 50ms
- **λ©”λ¨λ¦¬ μ‚¬μ©λ‰**: κΈ‰κ²©ν• μ¦κ°€ λλ” λ¦¬ν¬
- **CPU μ‚¬μ©λ¥ **: > 85%
- **μ—°κ²° μ„±κ³µλ¥ **: < 95%
- **ν¨ν‚· μ†μ‹¤λ¥ **: > 1%
- **TPS ν¬ν™”**: ν΄λΌμ΄μ–ΈνΈ μ¦κ°€ν•΄λ„ TPS μ¦κ°€ μ•λ¨

## π“ Grafana λ€μ‹λ³΄λ“μ—μ„ ν™•μΈν•  ν•­λ©

### **μ‹¤μ‹κ°„ λ¨λ‹ν„°λ§**
1. **μ—°κ²°λ ν΄λΌμ΄μ–ΈνΈ μ** - μ‹¤μ‹κ°„ μ—°κ²° μƒνƒ
2. **μ„λ²„ TPS** - μ΄λ‹Ή μ²λ¦¬ νΈλμ­μ… μ
3. **ν¨ν‚· μ²λ¦¬ μ‹κ°„** - ν‰κ· /μµλ€ μ²λ¦¬ μ‹κ°„
4. **λ©”λ¨λ¦¬ μ‚¬μ©λ‰** - ν™/ν’€ λ©”λ¨λ¦¬ μ‚¬μ©λ‰
5. **ν¨ν‚· μ†΅μμ‹  ν†µκ³„** - Move/Chat ν¨ν‚· λ¶„ν¬

### **μ„±λ¥ λ¶„μ„ ν¬μΈνΈ**
- **μ„ ν• μ¦κ°€**: TPSκ°€ ν΄λΌμ΄μ–ΈνΈ μμ— λΉ„λ΅€ν•΄μ„ μ¦κ°€ν•λ”κ°€?
- **μ•μ •μ„±**: λ©”λ¨λ¦¬ μ‚¬μ©λ‰μ΄ μ•μ •μ μΈκ°€?
- **μ‘λ‹µμ„±**: μ²λ¦¬ μ‹κ°„μ΄ μΌμ • μμ¤€ μ μ§€λλ”κ°€?
- **ν¬ν™”μ **: λ‡ κ° ν΄λΌμ΄μ–ΈνΈμ—μ„ μ„±λ¥μ΄ ν¬ν™”λλ”κ°€?

## π” λ‹¨κ³„λ³„ μΈ΅μ • λ°©λ²•

### **1λ‹¨κ³„: ν™κ²½ μ¤€λΉ„**
```bash
cd iocp_server_cpp/LoadTest
restart_monitoring.bat  # Docker ν™κ²½ μ¬μ‹μ‘
```

### **2λ‹¨κ³„: λ¶€ν•ν…μ¤νΈ μ‹¤ν–‰**
```bash
gradual_load_test.bat
```

### **3λ‹¨κ³„: μ‹¤μ‹κ°„ λ¨λ‹ν„°λ§**
- Grafana: `http://localhost:3000` (admin/admin)
- Prometheus: `http://localhost:9090/targets`

### **4λ‹¨κ³„: μ„±λ¥ λ¶„μ„**
- κ° 5κ° ν΄λΌμ΄μ–ΈνΈ λ‹¨μ„λ΅ 10μ΄κ°„ μ„±λ¥ μΈ΅μ •
- 30κ° ν΄λΌμ΄μ–ΈνΈκΉμ§€ μ μ§„μ  μ¦κ°€
- μ„±λ¥ μ €ν• κµ¬κ°„ μ‹λ³„

## π― μ„±λ¥ λ©ν‘ λ‹¬μ„± κΈ°μ¤€

### **Pass μ΅°κ±΄ (30κ° ν΄λΌμ΄μ–ΈνΈ)**
- β… μ΄ TPS β‰¥ 130 (λ©ν‘: 135)
- β… ν‰κ·  μ‘λ‹µ μ‹κ°„ < 20ms
- β… λ©”λ¨λ¦¬ μ‚¬μ©λ‰ μ•μ •
- β… μ—°κ²° μ„±κ³µλ¥  100%
- β… ν¨ν‚· μ†μ‹¤λ¥  0%

### **Excellent μ΅°κ±΄**
- π† μ΄ TPS β‰¥ 135
- π† ν‰κ·  μ‘λ‹µ μ‹κ°„ < 10ms
- π† CPU μ‚¬μ©λ¥  < 70%
- π† λ¨λ“  ν΄λΌμ΄μ–ΈνΈ μ•μ • μ—°κ²°
- π† μ„ ν• μ„±λ¥ μ¦κ°€

## π“‹ μ²΄ν¬λ¦¬μ¤νΈ

### **ν…μ¤νΈ μ „ ν™•μΈμ‚¬ν•­**
- [ ] GameServer λΉλ“ μ™„λ£ (Release λ¨λ“)
- [ ] DummyClientCS λΉλ“ μ™„λ£
- [ ] Docker ν™κ²½ μ •μƒ μ‹¤ν–‰
- [ ] Prometheus μ„¤μ • ν™•μΈ (ν¬νΈ 10001)
- [ ] Grafana λ€μ‹λ³΄λ“ λ΅λ“ ν™•μΈ

### **ν…μ¤νΈ μ¤‘ λ¨λ‹ν„°λ§**
- [ ] μ‹¤μ‹κ°„ TPS μ¦κ°€ ν™•μΈ
- [ ] λ©”λ¨λ¦¬ μ‚¬μ©λ‰ λ¨λ‹ν„°λ§
- [ ] μ—°κ²° μƒνƒ ν™•μΈ
- [ ] μ‘λ‹µ μ‹κ°„ λ³€ν™” κ΄€μ°°
- [ ] μ¤λ¥ λ°μƒ μ—¬λ¶€ ν™•μΈ

### **ν…μ¤νΈ ν›„ λ¶„μ„**
- [ ] μµλ€ TPS κΈ°λ΅
- [ ] μ„±λ¥ μ €ν• μ‹μ  νμ•…
- [ ] λ©”λ¨λ¦¬ λ¦¬ν¬ μ—¬λ¶€ ν™•μΈ
- [ ] ν¬ν™”μ  λ¶„μ„
- [ ] κ°μ„  λ°©μ• λ„μ¶

## π’΅ μ„±λ¥ κ°μ„  ν

### **μ„λ²„ μµμ ν™”**
- IOCP μ›μ»¤ μ¤λ λ“ μ μ΅°μ •
- λ©”λ¨λ¦¬ ν’€ ν¬κΈ° μµμ ν™”
- ν¨ν‚· μ²λ¦¬ λ΅μ§ κ°μ„ 
- λ°μ΄ν„°λ² μ΄μ¤ μΏΌλ¦¬ μµμ ν™”

### **ν΄λΌμ΄μ–ΈνΈ μµμ ν™”**
- ν¨ν‚· μ „μ†΅ κ°„κ²© μ΅°μ •
- μ—°κ²° μ¬μ‹λ„ λ΅μ§ κ°μ„ 
- λ©”λ¨λ¦¬ κ΄€λ¦¬ μµμ ν™”

μ΄ κ°€μ΄λ“λ¥Ό μ°Έκ³ ν•μ—¬ μ²΄κ³„μ μΈ μ„±λ¥ ν…μ¤νΈλ¥Ό μ§„ν–‰ν•κ³  μµμ μ μ„±λ¥μ„ λ‹¬μ„±ν•μ„Έμ”! π€ 