# π€ LoadTest - λ¶€ν•ν…μ¤νΈ + λ¨λ‹ν„°λ§ μ‹μ¤ν…

## π“ **ν΄λ” κµ¬μ΅°**

```
LoadTest/
β”β”€β”€ π“‚ scripts/           # μ‹¤ν–‰ μ¤ν¬λ¦½νΈλ“¤
β”‚   β”β”€β”€ cleanup_client_stats.bat      # JSON νμΌ μ •λ¦¬
β”‚   β”β”€β”€ gradual_load_test.bat         # μ μ§„μ  λ¶€ν•ν…μ¤νΈ  
β”‚   β”β”€β”€ quick_test.bat                # λΉ λ¥Έ ν…μ¤νΈ
β”‚   β”β”€β”€ register_acl.bat              # ACL λ“±λ΅
β”‚   β”β”€β”€ restart_monitoring.bat        # λ¨λ‹ν„°λ§ μ¬μ‹μ‘
β”‚   β””β”€β”€ simple_test.bat               # κ°„λ‹¨ν• ν…μ¤νΈ
β”‚
β”β”€β”€ π“‚ configs/          # μ„¤μ • νμΌλ“¤
β”‚   β”β”€β”€ docker-compose.yml           # Docker ν™κ²½ μ„¤μ •
β”‚   β”β”€β”€ nginx.conf                   # Nginx ν”„λ΅μ‹ μ„¤μ •
β”‚   β””β”€β”€ prometheus.yml               # Prometheus μ„¤μ •
β”‚
β”β”€β”€ π“‚ docs/             # λ¬Έμ„λ“¤
β”‚   β”β”€β”€ performance_guide.md         # μ„±λ¥ κ°€μ΄λ“
β”‚   β””β”€β”€ README.md                    # μƒμ„Έ λ§¤λ‰΄μ–Ό
β”‚
β”β”€β”€ π“‚ grafana/          # Grafana μ„¤μ •
β”‚   β”β”€β”€ dashboards/                  # λ€μ‹λ³΄λ“ μ •μ
β”‚   β””β”€β”€ provisioning/                # μλ™ ν”„λ΅λΉ„μ €λ‹
β”‚
β””β”€β”€ README.md            # μ΄ νμΌ (κ°„λ‹¨ κ°€μ΄λ“)
```

## π€ **λΉ λ¥Έ μ‹μ‘**

### **1. μ¦‰μ‹ ν…μ¤νΈ (30μ΄)**
```bash
cd iocp_server_cpp/LoadTest/
.\scripts\quick_test.bat
```

### **2. μ μ§„μ  λ¶€ν•ν…μ¤νΈ (5λ¶„)**
```bash
.\scripts\gradual_load_test.bat
```

### **3. λ¨λ‹ν„°λ§ ν™•μΈ**
- **Grafana**: http://localhost:3000 (admin/admin)
- **Prometheus**: http://localhost:9090
- **μ„λ²„ λ©”νΈλ¦­**: http://localhost:8080/metrics

## π“ **ν•µμ‹¬ κΈ°λ¥**

### β… **μ‹¤μ‹κ°„ λ©”νΈλ¦­ μμ§‘**
- **μ„λ²„**: μ—°κ²° μ, PPS, ν¨ν‚· μ²λ¦¬ μ‹κ°„, λ©”λ¨λ¦¬ μ‚¬μ©λ‰
- **ν΄λΌμ΄μ–ΈνΈ**: μ§€μ—°μ‹κ°„, μ „μ†΅ ν¨ν‚· μ, μ—°κ²° μƒνƒ
- **μ‹μ¤ν…**: CPU, λ©”λ¨λ¦¬, λ„¤νΈμ›ν¬ I/O

### β… **μλ™ν™”λ ν…μ¤νΈ**
- **μ μ§„μ  μ¦κ°€**: 1β†’3β†’5β†’10β†’20β†’50 ν΄λΌμ΄μ–ΈνΈ
- **ν¨ν‚· νƒ€μ…**: Move(0.25μ΄), Chat(2μ΄), RTT(5μ΄)
- **μ„±λ¥ ν†µκ³„**: JSON νμΌ μλ™ μƒμ„± (PerformanceTestμ—μ„λ§)

### β… **μ‹κ°ν™” λ€μ‹λ³΄λ“**
- **μ‹¤μ‹κ°„ κ·Έλν”„**: μ‹κ°„λ€λ³„ μ„±λ¥ μ¶”μ΄
- **λ©”νΈλ¦­ λΉ„κµ**: μ„λ²„ vs ν΄λΌμ΄μ–ΈνΈ μ§€ν‘
- **μ•λ¦Ό μ‹μ¤ν…**: μ„κ³„κ°’ μ΄κ³Ό μ‹ κ²½κ³ 

## π› οΈ **μ¤ν¬λ¦½νΈ μ„¤λ…**

| μ¤ν¬λ¦½νΈ | μ„¤λ… | μ©λ„ |
|---------|------|------|
| `quick_test.bat` | 5ν΄λΌμ΄μ–ΈνΈ 30μ΄ ν…μ¤νΈ | λΉ λ¥Έ λ™μ‘ ν™•μΈ |
| `gradual_load_test.bat` | μ μ§„μ  λ¶€ν•ν…μ¤νΈ | μ„±λ¥ ν•κ³„ νƒμ§€ |
| `simple_test.bat` | κΈ°λ³Έ ν…μ¤νΈ | λ””λ²„κΉ…μ© |
| `restart_monitoring.bat` | λ¨λ‹ν„°λ§ μ¬μ‹μ‘ | μ„¤μ • λ³€κ²½ ν›„ |
| `cleanup_client_stats.bat` | JSON νμΌ μ •λ¦¬ | λ””μ¤ν¬ κ³µκ°„ ν™•λ³΄ |

## π― **μ„±λ¥ λ©ν‘**

| ν΄λΌμ΄μ–ΈνΈ | μμƒ TPS | ν‰κ·  μ§€μ—°μ‹κ°„ | λ©”λ¨λ¦¬ |
|-----------|----------|-------------|--------|
| 1κ°       | 4.5      | < 5ms       | 100MB  |
| 10κ°      | 45       | < 10ms      | 200MB  |
| 50κ°      | 225      | < 20ms      | 500MB  |
| 100κ°     | 450      | < 50ms      | 1GB    |

## π”§ **μλ™ μ‹¤ν–‰**

```bash
# 1. Docker ν™κ²½ μ‹μ‘
docker-compose -f configs/docker-compose.yml up -d

# 2. GameServer μ‹¤ν–‰
cd ..\Binary\Release\
GameServer.exe

# 3. ν΄λΌμ΄μ–ΈνΈ μ‹¤ν–‰
cd ..\DummyClientCS\bin\Release\net9.0\
DummyClientCS.exe --clients=5 --duration=60
```

## π“ **κ²°κ³Ό λ¶„μ„**

### **μ„±λ¥ μ§€ν‘**
- **PPS (Packets Per Second)**: μ‹¤μ‹κ°„ ν¨ν‚· μ²λ¦¬μ¨
- **μ§€μ—°μ‹κ°„**: ν΄λΌμ΄μ–ΈνΈ β†’ μ„λ²„ β†’ ν΄λΌμ΄μ–ΈνΈ RTT
- **μ²λ¦¬μ‹κ°„**: μ„λ²„ λ‚΄λ¶€ ν¨ν‚· μ²λ¦¬ μ‹κ°„
- **λ©”λ¨λ¦¬**: ν™/ν’€ λ©”λ¨λ¦¬ μ‚¬μ©λ‰

### **λ³‘λ© μ§€μ **
- **CPU**: ν¨ν‚· μ²λ¦¬ μ¤λ λ“ ν¬ν™” μƒνƒ
- **λ©”λ¨λ¦¬**: SendBuffer Pool λ¶€μ΅±
- **λ„¤νΈμ›ν¬**: IOCP ν ν¬ν™”
- **DB**: Connection Pool ν•κ³„

---

## π“ **μƒμ„Έ λ¬Έμ„**

λ” μμ„Έν• λ‚΄μ©μ€ [`docs/README.md`](docs/README.md)λ¥Ό μ°Έκ³ ν•μ„Έμ”.

**π‰ μ΄μ  μ‹¤μ‹κ°„μΌλ΅ IOCP μ„λ²„μ μ„±λ¥μ„ λ¨λ‹ν„°λ§ν•  μ μμµλ‹λ‹¤!** 